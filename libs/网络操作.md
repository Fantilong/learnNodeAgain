<!--
 * @Author: your name
 * @Date: 2020-06-26 16:05:11
 * @LastEditTime: 2020-06-26 16:38:42
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /learnNodeAgain/libs/网络操作.md
--> 
# 网络操作
通过NodeJS，除了可以编写一些服务端程序来协助前端开发和测试外。还能够学习一些 HTTP 协议和 Socket 协议的相关知识。这些知识在优化前端和排查故障时说不定能排上用场。

## 开门红
通过内置库 `http` 实现简单的 HTTP 服务器
```
const http = require('http');

http.createServer((req, res) => {
    res.writeHead(200, {'Content-Type': 'text-plain'});
    res.end('Hello World\n');
}).listen(4399, 'server is listening on port 4399');
```
* Linux 系统，监听 1024 以下端口需要 root 权限，使用 sudo 命令启动程序

## 常用API
### HTTP 
`http` 模块提供两种使用方式</br>
* 作为服务端使用时，创建 HTTP 服务器，监听HTTP客户端请求并返回响应
* 作为客户端使用，发起 HTTP 请求，获取服务端响应

> 服务端模式下如何工作：

HTTP 请求本质上是一个数据流，由 `请求头` 和 `请求体` 组成，例如以下是一个完整的 HTTP 请求数据内容
```
POST / HTTP/1.1
User-Agent: curl/7.26.0
Host: localhost
Accept: */*
Content-Length: 11
Content-Type: application/x-www-form-urlencoded

~~~~~~~~~~~~~~ 上面是 请求头，下面是 请求体 ~~~~~~~~~~~~~~

Hello World
```
HTTP 请求在发送给服务器时，可以认为是按照 `从头到尾` 的顺序一个一个 `字节` 地以 `数据流` 的方式发送的。
而 `http` 模块创建的 HTTP 服务器在接收到完整的 `请求头` 后,就会调用回调函数。除了可以使用 `request` 对象访问 `请求头`数据外，还能把 `request` 对爱那个当做一个 `只读数据流` 来访问 `请求体` 数据，以下是案例：
```
http.createServer((req, res) => {
    
    req.on('data', chunk => console.log);
    req.on();
}).listen(port);


```
